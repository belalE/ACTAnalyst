<% layout('layouts/boilerplate') %>
<!-- User: If taken, show all questions; else, show log button -->
<a class="btn btn-sm btn-outline-secondary mb-3" href="/tests"
  >&laquo; All Tests</a
>
<h1><%= test.form %></h1>
<p>Date: <%= test.date %></p>
<% if (currentUser && currentUser.isAdmin) { %>
<form
  class="d-inline"
  action="/tests/<%= test.id %>?_method=DELETE"
  method="POST"
>
  <button
    class="
      inline-flex
      text-white
      bg-red-500
      border-0
      py-2
      px-6
      focus:outline-none
      hover:bg-red-600
      rounded
      text-lg
    "
  >
    Delete
  </button>
</form>

<a
  class="
    inline-flex
    text-white
    bg-blue-500
    border-0
    py-2
    px-6
    focus:outline-none
    hover:bg-blue-600
    rounded
    text-lg
  "
  href="/tests/<%=test._id%>/edit"
  >Edit</a
>
<br />
<% }%>
<div class="d-grid">
  <a class="btn btn-primary" href="/attempts/new?test=<%= test._id %>"
    >Make New Attempt</a
  >
</div>

<div class="w-4/5 mx-auto mt-4 rounded">
  <!-- Tabs -->
  <ul id="tabs" class="inline-flex w-full px-1 pt-2">
    <li
      class="
        px-4
        py-2
        -mb-px
        font-semibold
        text-gray-800
        border-b-2 border-blue-400
        rounded-t
        opacity-50
      "
    >
      <a id="default-tab" href="#first">English</a>
    </li>
    <li class="px-4 py-2 font-semibold text-gray-800 rounded-t opacity-50">
      <a href="#second">Math</a>
    </li>
    <li class="px-4 py-2 font-semibold text-gray-800 rounded-t opacity-50">
      <a href="#third">Reading</a>
    </li>
    <li class="px-4 py-2 font-semibold text-gray-800 rounded-t opacity-50">
      <a href="#fourth">Science</a>
    </li>
  </ul>

  <!-- Tab Contents -->
  <div id="tab-contents">
    <div id="first" class="p-4">
      <div class="grid grid-cols-2">
        <div id="distEng" class="mt-3"></div>
        <div id="scaleEng" class="mt-3"></div>
      </div>
    </div>
    <div id="second" class="hidden p-4">
      <div class="grid grid-cols-2">
        <div id="distMath" class="mt-3"></div>
        <div id="scaleMath" class="mt-3"></div>
      </div>
    </div>
    <div id="third" class="hidden p-4">
      <div class="grid grid-cols-2">
        <div id="distReading" class="mt-3"></div>
        <div id="scaleReading" class="mt-3"></div>
      </div>
    </div>
    <div id="fourth" class="hidden p-4">
      <div class="grid grid-cols-2">
        <div id="distScience" class="mt-3"></div>
        <div id="scaleScience" class="mt-3"></div>
      </div>
    </div>
  </div>
</div>

<!-- TODO: Link to attempts, if done -->

<script>
  const scales = <%- JSON.stringify(test.scales) %>;
  const topicStats = <%- JSON.stringify(topicStats) %>;
</script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
<script src="/javascripts/testShowGraphs.js"></script>
